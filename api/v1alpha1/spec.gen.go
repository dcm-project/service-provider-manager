// Package v1alpha1 provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package v1alpha1

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
